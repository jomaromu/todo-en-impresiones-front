{"ast":null,"code":"import { first } from 'rxjs/operators';\nimport * as loadingActions from '../../reducers/loading/loading.actions';\nimport * as modalActions from '../../reducers/modal/modal.actions';\nimport Swal from 'sweetalert2';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../../services/pedido.service\";\nimport * as i3 from \"../../services/producto.service\";\nimport * as i4 from \"../../services/origen-pedido.service\";\nimport * as i5 from \"../../services/producto-pedido.service\";\nimport * as i6 from \"../../services/user.service\";\nimport * as i7 from \"../../services/sucursal.service\";\nimport * as i8 from \"@ngrx/store\";\nimport * as i9 from \"@angular/forms\";\nimport * as i10 from \"@angular/common/http\";\nimport * as i11 from \"../../services/archivos.service\";\nimport * as i12 from \"../../services/sockets/websockets.service\";\nimport * as i13 from \"@angular/common\";\nimport * as i14 from \"../../shared/loading/loading.component\";\nimport * as i15 from \"../../shared/modal-data/modal-data.component\";\nconst _c0 = [\"usuarioEtapaView\"];\nconst _c1 = [\"placeHolderProducto\"];\nconst _c2 = [\"checkItbms\"];\nconst _c3 = [\"inputProducto\"];\n\nfunction PedidoComponent_div_37_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelementStart(1, \"label\", 18);\n    i0.ɵɵtext(2, \"RUC:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(3, \"input\", 80);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"value\", ctx_r0.pedido == null ? null : ctx_r0.pedido.cliente.ruc);\n  }\n}\n\nfunction PedidoComponent_option_54_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 81);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r14 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", item_r14.importancia);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", item_r14.nombre, \" \");\n  }\n}\n\nfunction PedidoComponent_option_59_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 81);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r15 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", item_r15.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", item_r15.nombre, \" \");\n  }\n}\n\nfunction PedidoComponent_option_65_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 81);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const diseniador_r16 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", diseniador_r16._id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate2(\" \", diseniador_r16.nombre, \" \", diseniador_r16.apellido, \"\");\n  }\n}\n\nfunction PedidoComponent_option_70_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 81);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r17 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", item_r17.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", item_r17.nombre, \" \");\n  }\n}\n\nfunction PedidoComponent_option_75_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 81);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const origen_r18 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", origen_r18._id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", origen_r18.nombre, \" \");\n  }\n}\n\nfunction PedidoComponent_option_84_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 81);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const sucursal_r19 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", sucursal_r19._id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"\", sucursal_r19.nombre, \" \");\n  }\n}\n\nfunction PedidoComponent_a_110_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r22 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"a\", 82);\n    i0.ɵɵlistener(\"click\", function PedidoComponent_a_110_Template_a_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r22);\n      const producto_r20 = restoredCtx.$implicit;\n      const ctx_r21 = i0.ɵɵnextContext();\n      return ctx_r21.agregarProducto(producto_r20);\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const producto_r20 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(producto_r20.nombre);\n  }\n}\n\nfunction PedidoComponent_tr_152_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r26 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"tr\");\n    i0.ɵɵelementStart(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵpipe(9, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"td\");\n    i0.ɵɵtext(11);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"td\");\n    i0.ɵɵtext(13);\n    i0.ɵɵpipe(14, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"td\", 83);\n    i0.ɵɵelementStart(16, \"i\", 84);\n    i0.ɵɵlistener(\"click\", function PedidoComponent_tr_152_Template_i_click_16_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r26);\n      const productoPedido_r23 = restoredCtx.$implicit;\n      const ctx_r25 = i0.ɵɵnextContext();\n      return ctx_r25.eliminarProductoPedido(productoPedido_r23, ctx_r25.pedido);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const productoPedido_r23 = ctx.$implicit;\n    const i_r24 = ctx.index;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i_r24 + 1);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(productoPedido_r23 == null ? null : productoPedido_r23.producto.nombre);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(productoPedido_r23 == null ? null : productoPedido_r23.cantidad);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind3(9, 6, productoPedido_r23 == null ? null : productoPedido_r23.precio, \"USD\", \"symbol\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(productoPedido_r23 == null ? null : productoPedido_r23.comentario);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind3(14, 10, productoPedido_r23 == null ? null : productoPedido_r23.total, \"USD\", \"symbol\"));\n  }\n}\n\nfunction PedidoComponent_div_153_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 85);\n    i0.ɵɵelementStart(1, \"table\", 86);\n    i0.ɵɵelementStart(2, \"tbody\");\n    i0.ɵɵelementStart(3, \"tr\");\n    i0.ɵɵelementStart(4, \"th\");\n    i0.ɵɵtext(5, \"Subtotal:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"th\");\n    i0.ɵɵtext(7);\n    i0.ɵɵpipe(8, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"tr\");\n    i0.ɵɵelementStart(10, \"th\");\n    i0.ɵɵtext(11, \"ITBMS:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"th\");\n    i0.ɵɵtext(13);\n    i0.ɵɵpipe(14, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"tr\");\n    i0.ɵɵelementStart(16, \"th\");\n    i0.ɵɵtext(17, \"Total:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"th\");\n    i0.ɵɵtext(19);\n    i0.ɵɵpipe(20, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r12 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(7);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind3(8, 3, ctx_r12.objTotal.subtotal, \"USD\", \"symbol\"));\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind3(14, 7, ctx_r12.objTotal.itbms, \"USD\", \"symbol\"));\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind3(20, 11, ctx_r12.objTotal.total, \"USD\", \"symbol\"));\n  }\n}\n\nfunction PedidoComponent_tr_190_td_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\");\n    i0.ɵɵtext(1, \"Normal\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction PedidoComponent_tr_190_td_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\");\n    i0.ɵɵtext(1, \"Corregir\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction PedidoComponent_tr_190_td_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\");\n    i0.ɵɵtext(1, \"Aprobado\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction PedidoComponent_tr_190_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r32 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"tr\");\n    i0.ɵɵelementStart(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(7, PedidoComponent_tr_190_td_7_Template, 2, 0, \"td\", 21);\n    i0.ɵɵtemplate(8, PedidoComponent_tr_190_td_8_Template, 2, 0, \"td\", 21);\n    i0.ɵɵtemplate(9, PedidoComponent_tr_190_td_9_Template, 2, 0, \"td\", 21);\n    i0.ɵɵelementStart(10, \"td\");\n    i0.ɵɵelementStart(11, \"a\", 87);\n    i0.ɵɵtext(12, \"Abrir\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"td\");\n    i0.ɵɵelementStart(14, \"i\", 88);\n    i0.ɵɵlistener(\"click\", function PedidoComponent_tr_190_Template_i_click_14_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r32);\n      const archivo_r27 = restoredCtx.$implicit;\n      const ctx_r31 = i0.ɵɵnextContext();\n      return ctx_r31.eliminarArchivo(archivo_r27._id, ctx_r31.pedido._id);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const archivo_r27 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(archivo_r27.nombre_archivo);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\"\", archivo_r27.idCreador.nombre, \" \", archivo_r27.idCreador.apellido, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(archivo_r27.fecha);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", archivo_r27.tipo === 0);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", archivo_r27.tipo === 1);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", archivo_r27.tipo === 2);\n  }\n}\n\nexport let PedidoComponent = /*#__PURE__*/(() => {\n  class PedidoComponent {\n    constructor(route, pedidoService, productoService, origenPedidoService, productoPedidoService, userService, sucursalService, store, fb, http, cdref, archivoService, wsService) {\n      this.route = route;\n      this.pedidoService = pedidoService;\n      this.productoService = productoService;\n      this.origenPedidoService = origenPedidoService;\n      this.productoPedidoService = productoPedidoService;\n      this.userService = userService;\n      this.sucursalService = sucursalService;\n      this.store = store;\n      this.fb = fb;\n      this.http = http;\n      this.cdref = cdref;\n      this.archivoService = archivoService;\n      this.wsService = wsService;\n      this.loading = false;\n      this.objTotal = {\n        subtotal: null,\n        itbms: null,\n        total: null\n      };\n      this.loadModal = false; // this.cdref.detectChanges();\n    }\n\n    ngOnInit() {\n      this.obtenerPedido();\n      this.cargarFormulario();\n      this.cargarArchivos();\n      this.escucharSocketsArchivos(); // this.cargarProductos();\n      // this.cagarUsuarioEtapa();\n    }\n\n    cargarFormulario() {\n      this.forma = this.fb.group({\n        fechaRegistro: [null],\n        fechaEntrega: [null],\n        etapaPedido: [null],\n        estadoPedido: [null],\n        prioridad: [null],\n        origenVenta: [null],\n        diseniador: [null],\n        vendedor: [null],\n        sucursal: [null],\n        producto: [null],\n        comentario: [null],\n        precio: [null],\n        cantidad: [null],\n        itbms: [null]\n      });\n      this.forma.controls.fechaRegistro.disable();\n    } // informacion\n\n\n    obtenerPedido() {\n      const idPedido = this.route.snapshot.queryParamMap.get('id');\n      this.store.select('login').pipe(first()).subscribe(worker => {\n        const data = {\n          token: worker.token,\n          idPedido\n        };\n        this.pedidoService.obtenerPedido(data).pipe(first()).subscribe(pedido => {\n          // console.log(pedido);\n          this.pedido = pedido.pedidoDB;\n          this.cargarSelects();\n          this.cargarProductosPedidos(pedido.pedidoDB);\n          const checkItbms = this.checkItbms.nativeElement;\n          checkItbms.checked = pedido.pedidoDB.itbms;\n        });\n      });\n    }\n\n    cargarSelects() {\n      this.store.select('login').pipe(first()).subscribe(worker => {\n        const cargarFechaEntrega = () => {\n          this.forma.controls.fechaEntrega.setValue(this.pedido.fecha_entrega);\n        };\n\n        const cargarPrioridad = () => {\n          this.http.get('../../../assets/prioridad.json').pipe().subscribe(data => {\n            this.prioridadesPedido = data;\n            this.forma.controls.prioridad.setValue(this.pedido.prioridad_pedido);\n          });\n        };\n\n        const cargarEtapa = () => {\n          this.http.get('../../../assets/etapas.json').pipe().subscribe(data => {\n            this.etapasPedido = data;\n            this.forma.controls.etapaPedido.setValue(this.pedido.etapa_pedido);\n          });\n        };\n\n        const cargarEstado = () => {\n          this.http.get('../../../assets/estados.json').pipe().subscribe(data => {\n            this.estadosPedido = data;\n            this.forma.controls.estadoPedido.setValue(this.pedido.estado_pedido);\n          });\n        };\n\n        const cargarOrigen = () => {\n          this.origenPedidoService.obtenerOrigenes(worker.token).subscribe(data => {\n            var _a;\n\n            this.origenes = data;\n            this.forma.controls.origenVenta.setValue((_a = this.pedido.origen_pedido) === null || _a === void 0 ? void 0 : _a._id); // Hacer populate en la DB\n          });\n        };\n\n        const cargarDiseniador = () => {\n          this.userService.obtenerUsuariosRole(worker.token, 'DiseniadorRole').subscribe(data => {\n            this.diseniadores = data.usuariosDB;\n            this.forma.controls.diseniador.setValue(data.usuariosDB[0]._id);\n          });\n        };\n\n        const cargarVendedor = () => {\n          this.userService.obtenerUsuarioID(this.pedido.idCreador._id, worker.token).subscribe(data => {\n            this.vendedor = `${data.usuario.nombre} ${data.usuario.apellido}`;\n            this.forma.controls.vendedor.disable();\n          });\n        };\n\n        const cargarSucursales = () => {\n          this.sucursalService.obtenerSucursales(worker.token).subscribe(data => {\n            this.sucursales = data.sucursalesDB;\n            this.forma.controls.sucursal.setValue(this.pedido.sucursal._id);\n          });\n        };\n\n        cargarPrioridad();\n        cargarEtapa();\n        cargarEstado();\n        cargarOrigen();\n        cargarDiseniador();\n        cargarVendedor();\n        cargarSucursales();\n        cargarFechaEntrega();\n      });\n    }\n\n    cargarDistribucion() {\n      this.store.dispatch(modalActions.cargarModal({\n        tipo: 'ver-diseniadores',\n        estado: true\n      }));\n    }\n\n    actualizarInfo() {\n      this.store.dispatch(loadingActions.cargarLoading());\n\n      if (this.forma.status === 'VALID') {\n        // console.log(this.pedido._id);\n        const data = {\n          id: this.pedido._id,\n          sucursal: this.forma.controls.sucursal.value,\n          etapa_pedido: this.forma.controls.etapaPedido.value,\n          prioridad_pedido: this.forma.controls.prioridad.value,\n          asignado_a: this.forma.controls.diseniador.value,\n          estado_pedido: this.forma.controls.estadoPedido.value,\n          fecha_entrega: this.forma.controls.fechaEntrega.value,\n          origen_pedido: this.forma.controls.origenVenta.value\n        };\n\n        if (data.etapa_pedido === 1 && data.asignado_a === null) {\n          Swal.fire('Mensaje', `Debe asignar el pedido a un diseñador`, 'error');\n          return;\n        }\n\n        this.store.select('login').pipe(first()).subscribe(worker => {\n          this.pedidoService.editarPedido(data, worker.token).subscribe(pedidoDB => {\n            this.store.dispatch(loadingActions.quitarLoading());\n\n            if (pedidoDB.ok === true) {\n              Swal.fire('Mensaje', `${pedidoDB.mensaje}`, 'info');\n            } else {\n              Swal.fire('Mensaje', `${pedidoDB.mensaje}`, 'info');\n              this.store.dispatch(loadingActions.quitarLoading());\n            }\n          });\n        });\n      }\n    } // producto\n\n\n    detectarProducto(e) {\n      const placeHolderProducto = this.placeHolderProducto.nativeElement;\n      e.target.addEventListener('blur', ev => {\n        setTimeout(() => {\n          placeHolderProducto.style.display = 'none';\n        }, 200);\n      });\n      const valProd = e.target.value;\n\n      if (valProd !== '') {\n        this.store.select('login').pipe(first()).subscribe(worker => {\n          const data = {\n            token: worker.token,\n            criterioNombre: valProd\n          };\n          this.productoService.obtenerProductoCriterioNombre(data).subscribe(productos => {\n            this.productos = productos.productosDB;\n\n            if (productos.productosDB.length === 0 || this.forma.controls.producto.value === '') {\n              placeHolderProducto.style.display = 'none';\n              this.producto = null;\n              this.productos = [];\n              this.forma.controls.comentario.setValue('');\n              this.forma.controls.cantidad.setValue('');\n              this.forma.controls.precio.setValue('');\n            }\n\n            if (productos.productosDB.length > 0) {\n              placeHolderProducto.style.display = 'block';\n            }\n          });\n        });\n      } else {\n        placeHolderProducto.style.display = 'none';\n        this.producto = null;\n        this.productos = [];\n        this.forma.controls.comentario.setValue('');\n        this.forma.controls.cantidad.setValue('');\n        this.forma.controls.precio.setValue('');\n      }\n    }\n\n    verPedidos() {\n      this.store.dispatch(modalActions.cargarModal({\n        tipo: 'ver-productos',\n        estado: true\n      }));\n    }\n\n    btnAgregar(e, pedido) {\n      const inputProducto = this.inputProducto.nativeElement;\n      const idProducto = inputProducto.getAttribute('data-idProducto');\n\n      if (idProducto === null) {\n        Swal.fire('Mensaje', 'Debe agregar un pedido', 'info');\n        return;\n      }\n\n      this.store.select('login').pipe(first()).subscribe(worker => {\n        const data = {\n          pedido: pedido._id,\n          producto: idProducto,\n          token: worker.token,\n          cantidad: this.forma.controls.cantidad.value,\n          precio: this.forma.controls.precio.value,\n          comentario: this.forma.controls.comentario.value // itbms: pedido.itbms\n\n        };\n        this.productoPedidoService.crearProductoPedido(data).subscribe(pedidoDB => {\n          this.cargarProductosPedidos(pedidoDB.pedidoDB);\n        });\n      });\n    }\n\n    agregarProducto(producto) {\n      this.forma.controls.producto.setValue(producto.nombre);\n      this.forma.controls.comentario.setValue(producto.descripcion);\n      this.forma.controls.cantidad.setValue(1);\n      this.forma.controls.precio.setValue(producto.precio);\n      this.producto = producto;\n    }\n\n    cargarProductosPedidos(pedido) {\n      this.store.select('login').pipe(first()).subscribe(worker => {\n        const data = {\n          token: worker.token,\n          pedido: pedido._id\n        };\n        this.productoPedidoService.obtenerProductosPedido(data).pipe(first()).subscribe(pedidoDB => {\n          this.productosPedidos = pedidoDB.pedidoDB.productos_pedidos; // console.log(pedido);\n\n          this.costoDelPedido(this.productosPedidos, pedido.itbms);\n\n          if (this.productosPedidos.length === 0) {\n            this.forma.controls.itbms.disable();\n          } else {\n            this.forma.controls.itbms.enable();\n          }\n        });\n      });\n    }\n\n    costoDelPedido(productoPedido, itbms) {\n      if (productoPedido.length === 0) {\n        this.objTotal.subtotal = 0;\n        this.objTotal.itbms = 0;\n        this.objTotal.total = 0;\n        return;\n      } // console.log(itbms);\n      // console.log(productoPedido, itbms);\n      // return;\n\n\n      if (itbms === false || !itbms) {\n        const mapSubtotal = productoPedido.map(productoPed => {\n          return productoPed.total;\n        });\n        const subtotal = mapSubtotal.reduce((acc, current) => {\n          return acc + current;\n        }); // itbms\n\n        const itmbs = subtotal * 0; // total\n\n        const total = subtotal + itmbs;\n        this.objTotal.subtotal = subtotal.toFixed(2);\n        this.objTotal.itbms = itmbs.toFixed(2);\n        this.objTotal.total = (subtotal + itmbs).toFixed(2);\n      }\n\n      if (itbms === true) {\n        const mapSubtotal = productoPedido.map(productoPed => {\n          return productoPed.total;\n        });\n        const subtotal = mapSubtotal.reduce((acc, current) => {\n          return acc + current;\n        }); // itbms\n\n        const itmbs = subtotal * 0.07; // total\n\n        const total = subtotal + itmbs;\n        this.objTotal.subtotal = subtotal.toFixed(2);\n        this.objTotal.itbms = itmbs.toFixed(2);\n        this.objTotal.total = (subtotal + itmbs).toFixed(2);\n      }\n    }\n\n    detectarItbms(e, pedido) {\n      const itbmsChecked = e.target.checked;\n      const data = {\n        itbms: itbmsChecked,\n        id: pedido._id\n      };\n      this.store.select('login').pipe(first()).subscribe(worker => {\n        this.pedidoService.editarPedido(data, worker.token).subscribe(pedidoDB => {\n          this.costoDelPedido(pedidoDB.pedidoDB.productos_pedidos, pedidoDB.pedidoDB.itbms);\n        });\n      });\n    }\n\n    actualizarProducto() {\n      console.log(this.forma);\n    }\n\n    eliminarProductoPedido(productoPedido, pedido) {\n      this.store.dispatch(loadingActions.cargarLoading());\n      this.store.select('login').pipe(first()).subscribe(worker => {\n        const data = {\n          token: worker.token,\n          IdProductoPedido: productoPedido._id,\n          pedido: pedido._id\n        };\n        Swal.fire({\n          title: 'Mensaje',\n          text: '¿Desea quitar este producto del pedido?',\n          icon: 'warning',\n          showCancelButton: true,\n          confirmButtonColor: '#3085d6',\n          cancelButtonColor: '#d33',\n          confirmButtonText: 'Quitar producto',\n          cancelButtonAriaLabel: 'Cancelar'\n        }).then(result => {\n          if (result.isConfirmed) {\n            this.productoPedidoService.eliminarProductoPedido(data).subscribe(pedidoDB => {\n              if (pedidoDB.ok === false) {\n                this.store.dispatch(loadingActions.quitarLoading());\n                Swal.fire('Mensaje', `${pedidoDB.mensaje}`, 'error');\n              } else {\n                this.store.dispatch(loadingActions.quitarLoading());\n                this.cargarProductosPedidos(pedidoDB.pedidoDB);\n                Swal.fire('Mensaje', 'Se quitó el producto del pedido', 'success');\n              }\n            });\n          } else {\n            this.store.dispatch(loadingActions.quitarLoading());\n          }\n        });\n      });\n    } // Archivo\n\n\n    addArchivo() {\n      this.store.dispatch(modalActions.cargarModal({\n        tipo: 'subir-archivos',\n        estado: true,\n        data: this.pedido._id\n      }));\n    }\n\n    cargarArchivos() {\n      this.store.select('login').pipe(first()).subscribe(worker => {\n        this.archivoService.obtenerTodosArchivos(worker.token).subscribe(archivo => {\n          this.archivo = archivo;\n        });\n      });\n    }\n\n    eliminarArchivo(idArchivo, idPedido) {\n      Swal.fire({\n        title: 'Mensaje',\n        text: '¿Desea eliminar este archivo?',\n        icon: 'warning',\n        showCancelButton: true,\n        confirmButtonColor: '#3085d6',\n        cancelButtonColor: '#d33',\n        confirmButtonText: 'Eliminar archivo',\n        cancelButtonText: 'Cancelar'\n      }).then(result => {\n        if (result.isConfirmed) {\n          this.store.dispatch(loadingActions.cargarLoading());\n          this.store.select('login').pipe(first()).subscribe(worker => {\n            const data = {\n              id: idArchivo,\n              pedido: idPedido,\n              token: worker.token\n            };\n            this.archivoService.eliminarArchivos(data).subscribe(archivo => {\n              if (archivo.ok === true) {\n                this.store.dispatch(loadingActions.quitarLoading());\n                Swal.fire('Mensaje', `${archivo.mensaje}`, 'info');\n              } else {\n                this.store.dispatch(loadingActions.quitarLoading());\n                Swal.fire('Mensaje', `${archivo.mensaje}`, 'error');\n              }\n            });\n          });\n        }\n      });\n    }\n\n    escucharSocketsArchivos() {\n      this.wsService.escuchar('recibir-archivos').subscribe(data => {\n        this.cargarArchivos();\n      });\n    }\n\n  }\n\n  PedidoComponent.ɵfac = function PedidoComponent_Factory(t) {\n    return new (t || PedidoComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.PedidoService), i0.ɵɵdirectiveInject(i3.ProductoService), i0.ɵɵdirectiveInject(i4.OrigenPedidoService), i0.ɵɵdirectiveInject(i5.ProductoPedidoService), i0.ɵɵdirectiveInject(i6.UserService), i0.ɵɵdirectiveInject(i7.SucursalService), i0.ɵɵdirectiveInject(i8.Store), i0.ɵɵdirectiveInject(i9.FormBuilder), i0.ɵɵdirectiveInject(i10.HttpClient), i0.ɵɵdirectiveInject(i0.ChangeDetectorRef), i0.ɵɵdirectiveInject(i11.ArchivosService), i0.ɵɵdirectiveInject(i12.WebsocketsService));\n  };\n\n  PedidoComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: PedidoComponent,\n    selectors: [[\"app-pedido\"]],\n    viewQuery: function PedidoComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(_c0, 7);\n        i0.ɵɵviewQuery(_c1, 7);\n        i0.ɵɵviewQuery(_c2, 7);\n        i0.ɵɵviewQuery(_c3, 7);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.usuarioEtapaView = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.placeHolderProducto = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.checkItbms = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.inputProducto = _t.first);\n      }\n    },\n    decls: 208,\n    vars: 19,\n    consts: [[\"id\", \"wrap-pedido\"], [\"id\", \"tab-pedido\", \"role\", \"tablist\", 1, \"nav\", \"nav-tabs\", \"nav-fill\"], [\"role\", \"presentation\", 1, \"nav-item\"], [\"data-bs-toggle\", \"tab\", \"data-bs-target\", \"#info\", \"type\", \"button\", \"role\", \"tab\", \"aria-selected\", \"true\", 1, \"nav-link\", \"active\"], [1, \"fas\", \"fa-info-circle\"], [\"data-bs-toggle\", \"tab\", \"data-bs-target\", \"#producto\", \"type\", \"button\", \"role\", \"tab\", \"aria-selected\", \"false\", 1, \"nav-link\"], [1, \"fas\", \"fa-box-open\"], [\"data-bs-toggle\", \"tab\", \"data-bs-target\", \"#archivos\", \"type\", \"button\", \"role\", \"tab\", \"aria-selected\", \"false\", 1, \"nav-link\"], [1, \"fas\", \"fa-file-alt\"], [\"data-bs-toggle\", \"tab\", \"data-bs-target\", \"#seguimiento\", \"type\", \"button\", \"role\", \"tab\", \"aria-selected\", \"false\", 1, \"nav-link\"], [1, \"fas\", \"fa-road\"], [\"data-bs-toggle\", \"tab\", \"data-bs-target\", \"#pagos\", \"type\", \"button\", \"role\", \"tab\", \"aria-selected\", \"false\", 1, \"nav-link\"], [1, \"fas\", \"fa-money-check-alt\"], [\"id\", \"myTabContent\", 1, \"tab-content\", 2, \"position\", \"relative\"], [\"id\", \"info\", \"role\", \"tabpanel\", 1, \"tab-pane\", \"fade\", \"show\", \"active\"], [\"id\", \"tap-informacion\", 1, \"wrapper-tap\"], [\"id\", \"info-cliente\", 1, \"wrap-info\"], [1, \"wrap-inputs\"], [\"for\", \"nombre\", 1, \"form-label\"], [\"type\", \"text\", \"id\", \"nombre\", \"disabled\", \"\", 1, \"form-control\", 3, \"value\"], [\"type\", \"text\", \"id\", \"telefono\", \"disabled\", \"\", 1, \"form-control\", 3, \"value\"], [4, \"ngIf\"], [\"id\", \"info-pedido\", 1, \"wrap-info\"], [\"id\", \"formulario\", 3, \"formGroup\", \"ngSubmit\"], [1, \"form-label\"], [\"type\", \"date\", \"id\", \"fecha-registro\", \"formControlName\", \"fechaRegistro\", 1, \"form-control\", 2, \"cursor\", \"no-drop\", 3, \"value\"], [\"type\", \"date\", \"id\", \"fecha_entrega\", \"formControlName\", \"fechaEntrega\", 1, \"form-control\", 3, \"value\"], [\"formControlName\", \"prioridad\", 1, \"form-select\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"formControlName\", \"etapaPedido\", 1, \"form-select\"], [\"role\", \"button\", 1, \"fas\", \"fa-feather-alt\", 3, \"click\"], [\"formControlName\", \"diseniador\", 1, \"form-select\"], [\"formControlName\", \"estadoPedido\", 1, \"form-select\"], [\"formControlName\", \"origenVenta\", 1, \"form-select\"], [\"type\", \"text\", \"id\", \"vendedor\", \"formControlName\", \"vendedor\", 1, \"form-control\", 2, \"cursor\", \"no-drop\", 3, \"value\"], [\"formControlName\", \"sucursal\", 1, \"form-select\"], [\"id\", \"wrap-buttons-acciones\"], [\"type\", \"submit\", 1, \"buttons\"], [\"id\", \"wrap-acciones\"], [\"type\", \"button\", \"data-bs-toggle\", \"collapse\", \"href\", \"#collapse-acciones\", 1, \"buttons\"], [\"id\", \"collapse-acciones\", 1, \"collapse\", \"multi-collapse\"], [1, \"card\", \"card-body\"], [\"id\", \"producto\", \"role\", \"tabpanel\", 1, \"tab-pane\", \"fade\"], [\"id\", \"tap-producto\", 1, \"wrapper-tap\"], [\"id\", \"wrap-producto\", 3, \"formGroup\", \"ngSubmit\"], [\"id\", \"detalle-producto\"], [\"id\", \"wrap-input-producto\", 1, \"inputs-producto\"], [\"for\", \"producto\", 1, \"form-label\"], [\"type\", \"text\", \"id\", \"producto\", \"formControlName\", \"producto\", \"autocomplete\", \"off\", 1, \"form-control\", 3, \"keyup\"], [\"inputProducto\", \"\"], [\"id\", \"placeholder-producto\"], [\"placeHolderProducto\", \"\"], [\"role\", \"button\", 3, \"click\", 4, \"ngFor\", \"ngForOf\"], [\"id\", \"wrap-input-comentario\", 1, \"inputs-producto\"], [\"for\", \"comentario\", 1, \"form-label\"], [\"id\", \"comentario\", \"rows\", \"4\", \"formControlName\", \"comentario\", 1, \"form-control\", 2, \"resize\", \"none\"], [1, \"inputs-producto\"], [\"for\", \"cantidad\", 1, \"form-label\"], [\"type\", \"number\", \"id\", \"cantidad\", \"formControlName\", \"cantidad\", 1, \"form-control\"], [\"for\", \"precio\", 1, \"form-label\"], [\"type\", \"number\", \"id\", \"precio\", \"formControlName\", \"precio\", 1, \"form-control\"], [1, \"inputs-producto\", \"itbms\"], [1, \"form-check\"], [\"type\", \"checkbox\", \"id\", \"itbms\", \"formControlName\", \"itbms\", 1, \"form-check-input\", 3, \"change\"], [\"checkItbms\", \"\"], [\"for\", \"itbms\", 1, \"form-check-label\"], [\"type\", \"button\", 3, \"click\"], [1, \"fas\", \"fa-cart-arrow-down\"], [\"id\", \"tabla-detalles-producto\"], [1, \"table\", \"table-striped\", \"table-hover\"], [4, \"ngFor\", \"ngForOf\"], [\"id\", \"total-compra\", 4, \"ngIf\"], [\"id\", \"archivos\", \"role\", \"tabpanel\", 1, \"tab-pane\", \"fade\", 2, \"min-height\", \"500px\"], [\"id\", \"tap-archivos\", 1, \"wrapper-tap\"], [\"id\", \"archivos\"], [\"id\", \"wrap-tabla\", 1, \"mb-3\"], [3, \"click\"], [1, \"fas\", \"fa-plus\"], [\"id\", \"seguimiento\", \"role\", \"tabpanel\", 1, \"tab-pane\", \"fade\"], [\"id\", \"pagos\", \"role\", \"tabpanel\", 1, \"tab-pane\", \"fade\"], [\"type\", \"text\", \"id\", \"ruc\", \"disabled\", \"\", 1, \"form-control\", 3, \"value\"], [3, \"value\"], [\"role\", \"button\", 3, \"click\"], [1, \"text-center\"], [1, \"fas\", \"fa-trash-alt\", \"text-danger\", 2, \"cursor\", \"pointer\", 3, \"click\"], [\"id\", \"total-compra\"], [1, \"table\", 2, \"max-width\", \"250px\", \"width\", \"120px\"], [\"href\", \"#\"], [\"role\", \"button\", 1, \"fas\", \"fa-trash-alt\", \"text-danger\", 3, \"click\"]],\n    template: function PedidoComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"ul\", 1);\n        i0.ɵɵelementStart(2, \"li\", 2);\n        i0.ɵɵelementStart(3, \"button\", 3);\n        i0.ɵɵelement(4, \"i\", 4);\n        i0.ɵɵtext(5, \" Informaci\\u00F3n \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(6, \"li\", 2);\n        i0.ɵɵelementStart(7, \"button\", 5);\n        i0.ɵɵelement(8, \"i\", 6);\n        i0.ɵɵtext(9, \" Producto \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(10, \"li\", 2);\n        i0.ɵɵelementStart(11, \"button\", 7);\n        i0.ɵɵelement(12, \"i\", 8);\n        i0.ɵɵtext(13, \" Archivos \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(14, \"li\", 2);\n        i0.ɵɵelementStart(15, \"button\", 9);\n        i0.ɵɵelement(16, \"i\", 10);\n        i0.ɵɵtext(17, \" Seguimiento \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(18, \"li\", 2);\n        i0.ɵɵelementStart(19, \"button\", 11);\n        i0.ɵɵelement(20, \"i\", 12);\n        i0.ɵɵtext(21, \" Pagos \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(22, \"div\", 13);\n        i0.ɵɵelementStart(23, \"div\", 14);\n        i0.ɵɵelementStart(24, \"div\", 15);\n        i0.ɵɵelementStart(25, \"div\", 16);\n        i0.ɵɵelementStart(26, \"h6\");\n        i0.ɵɵtext(27, \"Informaci\\u00F3n de cliente\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(28, \"div\", 17);\n        i0.ɵɵelementStart(29, \"div\");\n        i0.ɵɵelementStart(30, \"label\", 18);\n        i0.ɵɵtext(31, \"Nombre:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(32, \"input\", 19);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(33, \"div\");\n        i0.ɵɵelementStart(34, \"label\", 18);\n        i0.ɵɵtext(35, \"Tel\\u00E9fono:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(36, \"input\", 20);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(37, PedidoComponent_div_37_Template, 4, 1, \"div\", 21);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(38, \"div\", 22);\n        i0.ɵɵelementStart(39, \"h6\");\n        i0.ɵɵtext(40, \"Informaci\\u00F3n de pedido\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(41, \"form\", 23);\n        i0.ɵɵlistener(\"ngSubmit\", function PedidoComponent_Template_form_ngSubmit_41_listener() {\n          return ctx.actualizarInfo();\n        });\n        i0.ɵɵelementStart(42, \"div\");\n        i0.ɵɵelementStart(43, \"label\", 24);\n        i0.ɵɵtext(44, \"Fecha registro:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(45, \"input\", 25);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(46, \"div\");\n        i0.ɵɵelementStart(47, \"label\", 24);\n        i0.ɵɵtext(48, \"Fecha entrega:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(49, \"input\", 26);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(50, \"div\");\n        i0.ɵɵelementStart(51, \"label\", 24);\n        i0.ɵɵtext(52, \"Prioridad:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(53, \"select\", 27);\n        i0.ɵɵtemplate(54, PedidoComponent_option_54_Template, 2, 2, \"option\", 28);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(55, \"div\");\n        i0.ɵɵelementStart(56, \"label\", 24);\n        i0.ɵɵtext(57, \"Etapa pedido:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(58, \"select\", 29);\n        i0.ɵɵtemplate(59, PedidoComponent_option_59_Template, 2, 2, \"option\", 28);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(60, \"div\");\n        i0.ɵɵelementStart(61, \"label\", 24);\n        i0.ɵɵtext(62, \" Dise\\u00F1ador: \");\n        i0.ɵɵelementStart(63, \"i\", 30);\n        i0.ɵɵlistener(\"click\", function PedidoComponent_Template_i_click_63_listener() {\n          return ctx.cargarDistribucion();\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(64, \"select\", 31);\n        i0.ɵɵtemplate(65, PedidoComponent_option_65_Template, 2, 3, \"option\", 28);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(66, \"div\");\n        i0.ɵɵelementStart(67, \"label\", 24);\n        i0.ɵɵtext(68, \"Estado pedido:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(69, \"select\", 32);\n        i0.ɵɵtemplate(70, PedidoComponent_option_70_Template, 2, 2, \"option\", 28);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(71, \"div\");\n        i0.ɵɵelementStart(72, \"label\", 24);\n        i0.ɵɵtext(73, \"Origen venta:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(74, \"select\", 33);\n        i0.ɵɵtemplate(75, PedidoComponent_option_75_Template, 2, 2, \"option\", 28);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(76, \"div\");\n        i0.ɵɵelementStart(77, \"label\", 24);\n        i0.ɵɵtext(78, \"Vendedor:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(79, \"input\", 34);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(80, \"div\");\n        i0.ɵɵelementStart(81, \"label\", 24);\n        i0.ɵɵtext(82, \"Sucursal:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(83, \"select\", 35);\n        i0.ɵɵtemplate(84, PedidoComponent_option_84_Template, 2, 2, \"option\", 28);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(85, \"div\", 36);\n        i0.ɵɵelementStart(86, \"button\", 37);\n        i0.ɵɵtext(87, \"Guardar Cambios\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(88, \"div\", 38);\n        i0.ɵɵelementStart(89, \"button\", 39);\n        i0.ɵɵtext(90, \"Imprimir\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(91, \"div\", 40);\n        i0.ɵɵelementStart(92, \"div\", 41);\n        i0.ɵɵelementStart(93, \"button\");\n        i0.ɵɵtext(94, \"Imprimir factura\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(95, \"button\");\n        i0.ɵɵtext(96, \"Imprimir recibo\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(97, \"div\", 42);\n        i0.ɵɵelementStart(98, \"div\", 43);\n        i0.ɵɵelementStart(99, \"h6\");\n        i0.ɵɵtext(100, \"Informaci\\u00F3n de producto\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(101, \"form\", 44);\n        i0.ɵɵlistener(\"ngSubmit\", function PedidoComponent_Template_form_ngSubmit_101_listener() {\n          return ctx.actualizarProducto();\n        });\n        i0.ɵɵelementStart(102, \"div\", 45);\n        i0.ɵɵelementStart(103, \"div\", 46);\n        i0.ɵɵelementStart(104, \"label\", 47);\n        i0.ɵɵtext(105, \" Producto: \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(106, \"input\", 48, 49);\n        i0.ɵɵlistener(\"keyup\", function PedidoComponent_Template_input_keyup_106_listener($event) {\n          return ctx.detectarProducto($event);\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(108, \"div\", 50, 51);\n        i0.ɵɵtemplate(110, PedidoComponent_a_110_Template, 2, 1, \"a\", 52);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(111, \"div\", 53);\n        i0.ɵɵelementStart(112, \"label\", 54);\n        i0.ɵɵtext(113, \"Comentario:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(114, \"textarea\", 55);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(115, \"div\", 56);\n        i0.ɵɵelementStart(116, \"label\", 57);\n        i0.ɵɵtext(117, \"Cantidad:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(118, \"input\", 58);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(119, \"div\", 56);\n        i0.ɵɵelementStart(120, \"label\", 59);\n        i0.ɵɵtext(121, \"Precio:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(122, \"input\", 60);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(123, \"div\", 61);\n        i0.ɵɵelementStart(124, \"div\", 62);\n        i0.ɵɵelementStart(125, \"input\", 63, 64);\n        i0.ɵɵlistener(\"change\", function PedidoComponent_Template_input_change_125_listener($event) {\n          return ctx.detectarItbms($event, ctx.pedido);\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(127, \"label\", 65);\n        i0.ɵɵtext(128, \" ITBMS \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(129, \"div\", 56);\n        i0.ɵɵelementStart(130, \"button\", 66);\n        i0.ɵɵlistener(\"click\", function PedidoComponent_Template_button_click_130_listener($event) {\n          return ctx.btnAgregar($event, ctx.pedido);\n        });\n        i0.ɵɵelement(131, \"i\", 67);\n        i0.ɵɵtext(132, \" Agregar\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(133, \"div\", 68);\n        i0.ɵɵelementStart(134, \"table\", 69);\n        i0.ɵɵelementStart(135, \"thead\");\n        i0.ɵɵelementStart(136, \"tr\");\n        i0.ɵɵelementStart(137, \"th\");\n        i0.ɵɵtext(138, \"No.\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(139, \"th\");\n        i0.ɵɵtext(140, \"Producto\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(141, \"th\");\n        i0.ɵɵtext(142, \"Cantidad\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(143, \"th\");\n        i0.ɵɵtext(144, \"Precio\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(145, \"th\");\n        i0.ɵɵtext(146, \"Comentario\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(147, \"th\");\n        i0.ɵɵtext(148, \"Total\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(149, \"th\");\n        i0.ɵɵtext(150, \"controles\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(151, \"tbody\");\n        i0.ɵɵtemplate(152, PedidoComponent_tr_152_Template, 17, 14, \"tr\", 70);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(153, PedidoComponent_div_153_Template, 21, 15, \"div\", 71);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(154, \"div\", 36);\n        i0.ɵɵelement(155, \"span\");\n        i0.ɵɵelementStart(156, \"div\", 38);\n        i0.ɵɵelementStart(157, \"button\", 39);\n        i0.ɵɵtext(158, \"Imprimir\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(159, \"div\", 40);\n        i0.ɵɵelementStart(160, \"div\", 41);\n        i0.ɵɵelementStart(161, \"button\");\n        i0.ɵɵtext(162, \"Imprimir factura\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(163, \"button\");\n        i0.ɵɵtext(164, \"Imprimir recibo\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(165, \"div\", 72);\n        i0.ɵɵelementStart(166, \"div\", 73);\n        i0.ɵɵelementStart(167, \"h6\");\n        i0.ɵɵtext(168, \"Informaci\\u00F3n de archivos\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(169, \"div\", 74);\n        i0.ɵɵelementStart(170, \"div\", 75);\n        i0.ɵɵelementStart(171, \"button\", 76);\n        i0.ɵɵlistener(\"click\", function PedidoComponent_Template_button_click_171_listener() {\n          return ctx.addArchivo();\n        });\n        i0.ɵɵelement(172, \"i\", 77);\n        i0.ɵɵtext(173, \" A\\u00F1adir archivo \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(174, \"table\", 69);\n        i0.ɵɵelementStart(175, \"thead\");\n        i0.ɵɵelementStart(176, \"tr\");\n        i0.ɵɵelementStart(177, \"th\");\n        i0.ɵɵtext(178, \"Nombre\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(179, \"th\");\n        i0.ɵɵtext(180, \"Creador\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(181, \"th\");\n        i0.ɵɵtext(182, \"Fecha de alta\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(183, \"th\");\n        i0.ɵɵtext(184, \"Tipo\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(185, \"th\");\n        i0.ɵɵtext(186, \"Enlace\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(187, \"th\");\n        i0.ɵɵtext(188, \"Controles\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(189, \"tbody\");\n        i0.ɵɵtemplate(190, PedidoComponent_tr_190_Template, 15, 7, \"tr\", 70);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(191, \"div\", 36);\n        i0.ɵɵelement(192, \"span\");\n        i0.ɵɵelementStart(193, \"div\", 38);\n        i0.ɵɵelementStart(194, \"button\", 39);\n        i0.ɵɵtext(195, \"Imprimir\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(196, \"div\", 40);\n        i0.ɵɵelementStart(197, \"div\", 41);\n        i0.ɵɵelementStart(198, \"button\");\n        i0.ɵɵtext(199, \"Imprimir factura\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(200, \"button\");\n        i0.ɵɵtext(201, \"Imprimir recibo\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(202, \"div\", 78);\n        i0.ɵɵtext(203, \"Seg\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(204, \"div\", 79);\n        i0.ɵɵtext(205, \"Pag\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(206, \"app-loading\");\n        i0.ɵɵelement(207, \"app-modal-data\");\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(32);\n        i0.ɵɵproperty(\"value\", ctx.pedido == null ? null : ctx.pedido.cliente.nombre);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"value\", ctx.pedido == null ? null : ctx.pedido.cliente.telefono);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", (ctx.pedido == null ? null : ctx.pedido.cliente.client_role) === \"EmpresaRole\" || (ctx.pedido == null ? null : ctx.pedido.cliente.client_role) === \"EmpresaVIPRole\");\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"formGroup\", ctx.forma);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"value\", ctx.pedido == null ? null : ctx.pedido.fecha_alta);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"value\", ctx.fechaEntrega);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngForOf\", ctx.prioridadesPedido);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngForOf\", ctx.etapasPedido);\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"ngForOf\", ctx.diseniadores);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngForOf\", ctx.estadosPedido);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngForOf\", ctx.origenes == null ? null : ctx.origenes.origenesDB);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"value\", ctx.vendedor);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngForOf\", ctx.sucursales);\n        i0.ɵɵadvance(17);\n        i0.ɵɵproperty(\"formGroup\", ctx.forma);\n        i0.ɵɵadvance(5);\n        i0.ɵɵattribute(\"data-idProducto\", ctx.producto == null ? null : ctx.producto._id);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngForOf\", ctx.productos);\n        i0.ɵɵadvance(42);\n        i0.ɵɵproperty(\"ngForOf\", ctx.productosPedidos);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.objTotal.total !== 0);\n        i0.ɵɵadvance(37);\n        i0.ɵɵproperty(\"ngForOf\", ctx.archivo == null ? null : ctx.archivo.archivosDB);\n      }\n    },\n    directives: [i13.NgIf, i9.ɵNgNoValidate, i9.NgControlStatusGroup, i9.FormGroupDirective, i9.DefaultValueAccessor, i9.NgControlStatus, i9.FormControlName, i9.SelectControlValueAccessor, i13.NgForOf, i9.NumberValueAccessor, i9.CheckboxControlValueAccessor, i14.LoadingComponent, i15.ModalDataComponent, i9.NgSelectOption, i9.ɵNgSelectMultipleOption],\n    pipes: [i13.CurrencyPipe],\n    styles: [\"@import\\\"https://fonts.googleapis.com/css2?family=Roboto&display=swap\\\";@import\\\"https://fonts.googleapis.com/css2?family=Nunito+Sans&display=swap\\\";html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%!important;background-color:#eff2f5!important;position:relative;overflow:auto}.tab-pane[_ngcontent-%COMP%]{overflow:hidden}#wrap-pedido[_ngcontent-%COMP%]{width:850px;min-height:500px;background-color:#fff;margin:100px auto;font-family:\\\"Nunito Sans\\\",sans-serif;box-shadow:1px 1px 4px 1px #cfcfcf;border-radius:5px}#wrap-pedido[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]{background-color:#e5e5e5}#wrap-pedido[_ngcontent-%COMP%]   #myTabContent[_ngcontent-%COMP%]{padding:25px}#wrap-pedido[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#007467;font-weight:600}#wrap-pedido[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:7px}h6[_ngcontent-%COMP%]{color:#007467;text-shadow:1px 3px 3px #cecece;font-weight:600}.wrapper-tap[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:15px 50px}.wrap-info[_ngcontent-%COMP%]{display:grid;grid-template-columns:35% 55%;grid-column-gap:10%;column-gap:10%}.wrap-info[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{color:#007467;text-shadow:1px 3px 3px #cecece;font-weight:600}.wrap-info[_ngcontent-%COMP%]   .wrap-inputs[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:300px}.wrap-info[_ngcontent-%COMP%]   .wrap-inputs[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:0;font-size:14px}.wrap-info[_ngcontent-%COMP%]   .wrap-inputs[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-bottom:15px;cursor:no-drop}.wrap-info[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:grid;grid-template-columns:45% 45%;grid-column-gap:10%;column-gap:10%;margin-bottom:75px}.wrap-info[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:0;font-size:14px}.wrap-info[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .wrap-info[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{margin-bottom:15px}.wrap-info[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .fa-feather-alt[_ngcontent-%COMP%]{margin-left:5px;color:#009f8d;width:25px;font-size:18px;transition:.3s all ease-in-out}.wrap-info[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .fa-feather-alt[_ngcontent-%COMP%]:hover{color:#004b43}.wrap-info[_ngcontent-%COMP%]:first-child{margin-bottom:40px}#wrap-buttons-acciones[_ngcontent-%COMP%]{position:absolute;display:grid;grid-template-columns:160px 160px;grid-column-gap:25px;column-gap:25px;bottom:25px;right:25px}#wrap-buttons-acciones[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{height:35px;width:150px;box-shadow:none!important;border:1px solid #cccccc!important;transition:.3s all ease-in-out;font-weight:200}#wrap-buttons-acciones[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]:hover{box-shadow:1px 1px 4px 1px #cfcfcf!important}#wrap-buttons-acciones[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-child{display:flex;justify-content:center;align-items:center;font-family:\\\"Nunito Sans\\\",sans-serif;flex-direction:row;outline:none;border:none;background-color:#fff;color:#00b19d;height:35px;padding:10px;border-radius:4px;box-shadow:1px 1px 3px 3px #cecece;transition:.3s all ease-in-out;font-size:14px}#wrap-buttons-acciones[_ngcontent-%COMP%]   #wrap-acciones[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;font-family:\\\"Nunito Sans\\\",sans-serif;flex-direction:row;outline:none;border:none;background-color:#009f8d;color:#fff;height:35px;padding:10px;border-radius:4px;box-shadow:1px 1px 3px 3px #cecece;transition:.3s all ease-in-out;font-size:14px}#wrap-buttons-acciones[_ngcontent-%COMP%]   #wrap-acciones[_ngcontent-%COMP%]   #collapse-acciones[_ngcontent-%COMP%]{position:absolute}#wrap-buttons-acciones[_ngcontent-%COMP%]   #wrap-acciones[_ngcontent-%COMP%]   #collapse-acciones[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-bottom:10px;font-weight:200}#tap-producto[_ngcontent-%COMP%]{min-height:500px}#tap-producto[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{color:#007467;text-shadow:1px 3px 3px #cecece;margin-bottom:30px;font-weight:600}#tap-producto[_ngcontent-%COMP%]   #detalle-producto[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);grid-column-gap:35px;column-gap:35px}#tap-producto[_ngcontent-%COMP%]   #detalle-producto[_ngcontent-%COMP%]   #wrap-input-producto[_ngcontent-%COMP%]{grid-column:1/span 2;grid-row:1}#tap-producto[_ngcontent-%COMP%]   #detalle-producto[_ngcontent-%COMP%]   #wrap-input-comentario[_ngcontent-%COMP%]{grid-column:3;grid-row:1/span 2}#tap-producto[_ngcontent-%COMP%]   #detalle-producto[_ngcontent-%COMP%]   .inputs-producto[_ngcontent-%COMP%]{margin-bottom:15px}#tap-producto[_ngcontent-%COMP%]   #detalle-producto[_ngcontent-%COMP%]   .inputs-producto[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;font-family:\\\"Nunito Sans\\\",sans-serif;flex-direction:row;outline:none;border:none;background-color:#009f8d;color:#fff;height:35px;padding:10px;border-radius:4px;box-shadow:1px 1px 3px 3px #cecece;transition:.3s all ease-in-out;font-size:14px;height:30px;font-weight:200}#tap-producto[_ngcontent-%COMP%]   #detalle-producto[_ngcontent-%COMP%]   .inputs-producto[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{box-shadow:1px 1px 4px 1px #cfcfcf!important}#tap-producto[_ngcontent-%COMP%]   #detalle-producto[_ngcontent-%COMP%]   .inputs-producto[_ngcontent-%COMP%]:not(.itbms)   input[_ngcontent-%COMP%]{margin:0}#tap-producto[_ngcontent-%COMP%]   #detalle-producto[_ngcontent-%COMP%]   .inputs-producto[_ngcontent-%COMP%]:not(.itbms)   label[_ngcontent-%COMP%]{margin:0;font-size:14px}#tap-producto[_ngcontent-%COMP%]   #detalle-producto[_ngcontent-%COMP%]   #wrap-input-producto[_ngcontent-%COMP%]{position:relative}#tap-producto[_ngcontent-%COMP%]   #detalle-producto[_ngcontent-%COMP%]   #wrap-input-producto[_ngcontent-%COMP%]   #placeholder-producto[_ngcontent-%COMP%]{display:none;border-right:1px solid #cdcdcd;border-left:1px solid #cdcdcd;border-bottom:1px solid #cdcdcd;border-radius:5px;position:absolute;width:100%;z-index:99;background-color:#fff;max-height:100px;overflow-y:scroll;padding:5px}#tap-producto[_ngcontent-%COMP%]   #detalle-producto[_ngcontent-%COMP%]   #wrap-input-producto[_ngcontent-%COMP%]   #placeholder-producto[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{width:100%;display:block;padding:5px}#tap-producto[_ngcontent-%COMP%]   #detalle-producto[_ngcontent-%COMP%]   #wrap-input-producto[_ngcontent-%COMP%]   #placeholder-producto[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:#e5e5e5}#tap-producto[_ngcontent-%COMP%]   #tabla-detalles-producto[_ngcontent-%COMP%]{margin:50px 0 100px}#tap-producto[_ngcontent-%COMP%]   #tabla-detalles-producto[_ngcontent-%COMP%]   #total-compra[_ngcontent-%COMP%] > table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%]{line-height:15px}#tap-archivos[_ngcontent-%COMP%]   #archivos[_ngcontent-%COMP%]{margin:40px 0 25px}#tap-archivos[_ngcontent-%COMP%]   #archivos[_ngcontent-%COMP%]   #wrap-tabla[_ngcontent-%COMP%]{margin-top:40px;display:flex;flex-direction:column}#tap-archivos[_ngcontent-%COMP%]   #archivos[_ngcontent-%COMP%]   #wrap-tabla[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;font-family:\\\"Nunito Sans\\\",sans-serif;flex-direction:row;outline:none;border:none;background-color:#00b19d;color:#e5e5e5;height:35px;padding:10px;border-radius:4px;box-shadow:1px 1px 3px 3px #cecece;transition:.3s all ease-in-out;font-size:14px;align-self:flex-end;margin-bottom:25px;font-weight:200}#tap-archivos[_ngcontent-%COMP%]   #archivos[_ngcontent-%COMP%]   #wrap-tabla[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{box-shadow:1px 1px 4px 1px #cfcfcf!important}\"]\n  });\n  return PedidoComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}