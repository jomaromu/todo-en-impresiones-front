{"ast":null,"code":"import { EventEmitter } from '@angular/core';\nimport { first } from 'rxjs/operators';\nimport * as loginActions from '../../reducers/login/login.actions';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ngrx/store\";\nimport * as i2 from \"../../services/pedido.service\";\nimport * as i3 from \"@angular/common\";\nconst _c0 = [\"fondo\"];\nconst _c1 = [\"ayuda\"];\n\nfunction BusquedaComponent_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 12);\n    i0.ɵɵelementStart(1, \"p\", 13);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"p\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(5, \"hr\", 14);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ayuda_r3 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ayuda_r3.nombre);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ayuda_r3.descripcion);\n  }\n}\n\nexport let BusquedaComponent = /*#__PURE__*/(() => {\n  class BusquedaComponent {\n    constructor(store, pedidoService) {\n      this.store = store;\n      this.pedidoService = pedidoService;\n      this.emitirPedidos = new EventEmitter();\n    }\n\n    ngOnInit() {\n      this.cargarAyudas();\n    }\n\n    mostrarAyudas() {\n      const fondo = this.fondo.nativeElement;\n      const ayuda = this.ayuda.nativeElement;\n      fondo.style.display = 'flex';\n      ayuda.classList.remove('animate__flipOutX');\n      ayuda.classList.add('animate__flipInX');\n    }\n\n    cerrarFondo() {\n      const fondo = this.fondo.nativeElement;\n      const ayuda = this.ayuda.nativeElement;\n      ayuda.classList.remove('animate__flipInX');\n      ayuda.classList.add('animate__flipOutX');\n      setTimeout(() => {\n        fondo.style.display = 'none';\n      }, 800);\n    }\n\n    cargarAyudas() {\n      const token = localStorage.getItem('token');\n      this.store.select('login').pipe(first()).subscribe(worker => {\n        this.store.dispatch(loginActions.obtenerToken({\n          token: worker.token\n        }));\n      });\n      this.store.select('ayuda').subscribe(ayudas => {\n        if (!ayudas) {\n          return;\n        } else {\n          const filtroAyudas = ayudas.filter(ayuda => ayuda.estado !== false);\n          this.ayudas = filtroAyudas;\n        }\n      });\n    }\n\n    buscarPedidos(e) {\n      const criterio = e.target.value; // if (criterio === '' || !criterio) {\n      //   return;\n      // }\n\n      this.store.select('login').pipe(first()).subscribe(worker => {\n        this.pedidoService.obtenerPedidos(worker.token).subscribe(pedido => {\n          const pedidos = pedido.pedidosDB.filter(pedidoDB => {\n            // tslint:disable-next-line: max-line-length\n            return pedidoDB.idReferencia === criterio || pedidoDB.Cliente[0].nombre === criterio || pedidoDB.Cliente[0].telefono === criterio;\n          });\n\n          if (pedidos.length === 0 || criterio === '') {\n            this.emitirPedidos.emit(pedido.pedidosDB);\n          } else {\n            this.emitirPedidos.emit(pedidos);\n          }\n        });\n      });\n    }\n\n  }\n\n  BusquedaComponent.ɵfac = function BusquedaComponent_Factory(t) {\n    return new (t || BusquedaComponent)(i0.ɵɵdirectiveInject(i1.Store), i0.ɵɵdirectiveInject(i2.PedidoService));\n  };\n\n  BusquedaComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: BusquedaComponent,\n    selectors: [[\"app-busqueda\"]],\n    viewQuery: function BusquedaComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(_c0, 7);\n        i0.ɵɵviewQuery(_c1, 7);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.fondo = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.ayuda = _t.first);\n      }\n    },\n    inputs: {\n      pedidos: \"pedidos\"\n    },\n    outputs: {\n      emitirPedidos: \"emitirPedidos\"\n    },\n    decls: 13,\n    vars: 1,\n    consts: [[\"id\", \"fondo\"], [\"fondo\", \"\"], [\"role\", \"button\", 1, \"fas\", \"fa-times-circle\", 2, \"position\", \"absolute\", \"top\", \"100px\", \"right\", \"200px\", \"font-size\", \"24px\", \"color\", \"rgb(204, 31, 0)\", 3, \"click\"], [\"id\", \"ayuda\", 1, \"animate__animated\"], [\"ayuda\", \"\"], [\"id\", \"wrap-ayuda\", \"style\", \"width: 100%;\", 4, \"ngFor\", \"ngForOf\"], [1, \"wrap-busqueda\"], [\"id\", \"box-busqueda\", 1, \"ctrl-ayuda\"], [\"type\", \"text\", \"placeholder\", \"Buscar...\", 3, \"keyup\"], [\"id\", \"ayuda\", 1, \"ctrl-ayuda\"], [1, \"far\", \"fa-question-circle\"], [3, \"click\"], [\"id\", \"wrap-ayuda\", 2, \"width\", \"100%\"], [2, \"font-weight\", \"bold\"], [2, \"border\", \"1px solid gray\", \"width\", \"100%\"]],\n    template: function BusquedaComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0, 1);\n        i0.ɵɵelementStart(2, \"i\", 2);\n        i0.ɵɵlistener(\"click\", function BusquedaComponent_Template_i_click_2_listener() {\n          return ctx.cerrarFondo();\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(3, \"div\", 3, 4);\n        i0.ɵɵtemplate(5, BusquedaComponent_div_5_Template, 6, 2, \"div\", 5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(6, \"div\", 6);\n        i0.ɵɵelementStart(7, \"div\", 7);\n        i0.ɵɵelementStart(8, \"input\", 8);\n        i0.ɵɵlistener(\"keyup\", function BusquedaComponent_Template_input_keyup_8_listener($event) {\n          return ctx.buscarPedidos($event);\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"div\", 9);\n        i0.ɵɵelement(10, \"i\", 10);\n        i0.ɵɵelementStart(11, \"span\", 11);\n        i0.ɵɵlistener(\"click\", function BusquedaComponent_Template_span_click_11_listener() {\n          return ctx.mostrarAyudas();\n        });\n        i0.ɵɵtext(12, \"Ayuda\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngForOf\", ctx.ayudas);\n      }\n    },\n    directives: [i3.NgForOf],\n    styles: [\"@import\\\"https://fonts.googleapis.com/css2?family=Roboto&display=swap\\\";@import\\\"https://fonts.googleapis.com/css2?family=Nunito+Sans&display=swap\\\";html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%!important;background-color:#eff2f5!important;position:relative;overflow:auto}#fondo[_ngcontent-%COMP%]{position:fixed;width:100vw;height:100vh;display:flex;justify-content:center;align-items:center;font-family:\\\"Nunito Sans\\\",sans-serif;display:none;background-color:#e5e5e580;z-index:99;top:0;left:0}.wrap-busqueda[_ngcontent-%COMP%]{background-color:#fff;width:calc(100% - 200px);height:70px;box-shadow:1px 1px 4px 1px #cfcfcf;padding:15px;display:flex;justify-content:space-between;flex-direction:row;align-items:center;position:fixed;top:0;left:200px;z-index:9}#box-busqueda[_ngcontent-%COMP%]{color:#adadad;display:flex;justify-content:center;align-items:center;font-family:\\\"Nunito Sans\\\",sans-serif}#box-busqueda[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:150px;outline:none;border:1px solid #adadad;border-radius:5px;margin-right:7px;caret-color:#adadad;height:30px;color:#474747;font-family:\\\"Nunito Sans\\\",sans-serif;font-size:16px}#box-busqueda[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{size:16px;cursor:pointer;transition:.3s all ease-in-out}#box-busqueda[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{color:#2e2e2e;cursor:pointer}.ctrl-ayuda[_ngcontent-%COMP%]{margin-left:50px;margin-right:50px}#ayuda[_ngcontent-%COMP%]{color:#616161;display:flex;justify-content:center;align-items:center;font-family:\\\"Nunito Sans\\\",sans-serif;transition:.3s all ease-in-out;font-size:16px}#ayuda[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:6px}#ayuda[_ngcontent-%COMP%]:hover{color:#2e2e2e;cursor:pointer}#fondo[_ngcontent-%COMP%]   div#ayuda[_ngcontent-%COMP%]{width:500px;height:250px;border:1px solid #cccccc;background-color:#fff;cursor:inherit;border-radius:5px;overflow-y:scroll;display:flex;flex-direction:column;justify-content:flex-start;align-items:flex-start;padding:25px}#fondo[_ngcontent-%COMP%]   div#ayuda[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{word-break:break-all;width:100%}\"]\n  });\n  return BusquedaComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}